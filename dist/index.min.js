var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};import puppeteer from"puppeteer";import fs from"fs";function main(){return __awaiter(this,void 0,void 0,function*(){var browser=yield puppeteer.launch({headless:!0}),page=yield browser.newPage(),page=(yield page.goto("https://joaopessoa.ifpb.edu.br/horario/curso/4"),yield page.waitForSelector(".tab-pane"),yield page.evaluate(()=>{var _a;const course=(null==(_a=document.querySelector("b"))?void 0:_a.innerText).slice(2,-3),courseClasses=[];return Array.from(document.querySelectorAll(".tab-pane div table tbody")).forEach(semester=>{semester=Array.from(semester.querySelectorAll("tr"));semester.shift(),semester.forEach(tr=>{tr=Array.from(tr.querySelectorAll("td"));tr.shift(),tr.forEach(td=>{var semester,weekday,start,end,_a,aTeacherElement,td=td.querySelector("div");0!==(null==td?void 0:td.childElementCount)&&({semester,weekday,start,end}=function(divId){var[divId,day,timeSlot]=divId.split("_"),divId=parseInt(divId),day=parseInt(day),[timeSlot,end]={1:"07:00 - 07:50",2:"07:50 - 08:40",3:"08:40 - 09:30",4:"09:50 - 10:40",5:"10:40 - 11:30",6:"11:30 - 12:20",7:"13:00 - 13:50",8:"13:50 - 14:40",9:"14:40 - 15:30",10:"15:50 - 16:40",11:"16:40 - 17:30",12:"17:30 - 18:20",13:"18:20 - 19:10",14:"19:10 - 20:00",15:"20:00 - 20:50",16:"20:50 - 21:40",17:"21:40 - 22:30"}[parseInt(timeSlot)].split(" - ");return{semester:divId,weekday:{1:"segunda",2:"terca",3:"quarta",4:"quinta",5:"sexta"}[day],start:timeSlot,end:end}}(null==td?void 0:td.id),_a=null==(_a=null==td?void 0:td.querySelector("span"))?void 0:_a.innerText,td=null==td?void 0:td.querySelectorAll("a"),aTeacherElement=Array.from(td).filter((a,i)=>i%2==0),td=Array.from(td).filter((a,i)=>i%2!=0),aTeacherElement=aTeacherElement.map(a=>({name:a.innerText,link:a.href})),td=td.map(a=>({name:a.innerText,link:a.href})),courseClasses.push({course:course,semester:semester,weekday:weekday,start:start,end:end,className:_a,teacher:aTeacherElement,location:td}))})})}),courseClasses}));return yield browser.close(),page})}const runMain=!0,save=!0;runMain&&main().then(data=>{var courseName;save&&(courseName=data[0].course.split(" ").join("_"),fs.writeFileSync(`data/${courseName}.json`,JSON.stringify(data,null,2)))});